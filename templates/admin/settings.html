<!DOCTYPE html>
<html lang="{{ lang }}" dir="{{ 'rtl' if lang == 'ar' else 'ltr' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0A2463">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>{{ t('settings') }} - Admin</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
<div class="page-header" style="background:linear-gradient(135deg,#1a0533,#3d0d6b)">
  <a href="/admin" class="back-btn" style="background:rgba(255,255,255,0.15)">â†</a>
  <div class="page-title-wrap"><div class="page-title">âš™ï¸ {{ t('settings') }}</div></div>
</div>
<div style="padding:14px;background:#F0F4FF;min-height:calc(100vh - 60px)">
  <div class="card">
    <div class="form-group"><label class="form-label">{{ t('referral_bonus') }}</label><input type="number" class="form-control" id="s-rb" value="{{ settings.referral_bonus }}"></div>
    <div class="form-group"><label class="form-label">{{ t('referral_tasks') }}</label><input type="number" class="form-control" id="s-rt" value="{{ settings.referral_tasks_needed }}"></div>
    <div class="form-group"><label class="form-label">{{ t('fee_percent') }}</label><input type="number" class="form-control" id="s-fee" value="{{ settings.withdrawal_fee_percent }}" step="0.1"></div>
    <div class="form-group"><label class="form-label">{{ t('min_withdrawal') }}</label><input type="number" class="form-control" id="s-min" value="{{ settings.min_withdrawal }}"></div>
    <div class="form-group"><label class="form-label">{{ t('max_withdrawal') }}</label><input type="number" class="form-control" id="s-max" value="{{ settings.max_withdrawal }}"></div>
    <div class="form-group"><label class="form-label">{{ t('exchange_rate') }} ($1 = â‚¦)</label><input type="number" class="form-control" id="s-rate" value="{{ settings.exchange_rate }}"></div>
    <div class="form-group"><label class="form-label">{{ t('maintenance_mode') }}</label>
      <select class="form-control" id="s-maint">
        <option value="0" {{ 'selected' if not settings.maintenance else '' }}>ğŸŸ¢ Off</option>
        <option value="1" {{ 'selected' if settings.maintenance else '' }}>ğŸ”´ On</option>
      </select>
    </div>
    <button class="btn btn-primary" id="s-btn" onclick="saveSettings()">ğŸ’¾ {{ t('save_settings') }}</button>
  </div>
</div>

  <div id="toast-container" class="toast-container"></div>
  <script src="/static/js/app.js"></script>
<script>
async function saveSettings() {
  const fd = new FormData();
  fd.append('referral_bonus', document.getElementById('s-rb').value);
  fd.append('referral_tasks_needed', document.getElementById('s-rt').value);
  fd.append('withdrawal_fee_percent', document.getElementById('s-fee').value);
  fd.append('min_withdrawal', document.getElementById('s-min').value);
  fd.append('max_withdrawal', document.getElementById('s-max').value);
  fd.append('exchange_rate', document.getElementById('s-rate').value);
  fd.append('maintenance', document.getElementById('s-maint').value);
  await postForm('/admin/settings', fd, document.getElementById('s-btn'));
}
</script>
</body>
</html>
