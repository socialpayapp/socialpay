<!DOCTYPE html>
<html lang="{{ lang }}" dir="{{ 'rtl' if lang == 'ar' else 'ltr' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0A2463">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Admin - SocialPay</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
<div class="admin-header">
  <div>
    <div class="admin-logo">âš™ï¸ {{ t('admin_panel') }} <span class="admin-badge">ADMIN</span></div>
    <div style="font-size:12px;opacity:0.65;margin-top:3px">{{ t('app_name') }} v3.0</div>
  </div>
  <div style="display:flex;gap:8px;align-items:center">
    <div class="lang-bar">
      <a href="/set_lang/en" class="lang-btn {{ 'active' if lang=='en' else '' }}">EN</a>
      <a href="/set_lang/ar" class="lang-btn {{ 'active' if lang=='ar' else '' }}">AR</a>
      <a href="/set_lang/ha" class="lang-btn {{ 'active' if lang=='ha' else '' }}">HA</a>
    </div>
    <a href="/logout" style="color:rgba(255,255,255,0.65);font-size:12px;text-decoration:none">ğŸšª</a>
  </div>
</div>

<div style="background:#F0F4FF;min-height:100vh;padding-bottom:30px">

  {% if settings.maintenance %}
  <div class="alert alert-warning" style="margin:12px 16px 0;border-radius:12px">âš ï¸ Maintenance Mode is ON</div>
  {% endif %}

  <!-- STATS -->
  <div class="admin-stats">
    <div class="admin-stat-card">
      <div class="astat-icon" style="background:#DBEAFE">ğŸ‘¤</div>
      <div><div class="astat-val">{{ total_users }}</div><div class="astat-lbl">{{ t('total_users') }}</div></div>
    </div>
    <div class="admin-stat-card">
      <div class="astat-icon" style="background:#D1FAE5">ğŸ“‹</div>
      <div><div class="astat-val">{{ active_tasks }}</div><div class="astat-lbl">{{ t('active_tasks') }}</div></div>
    </div>
    <div class="admin-stat-card">
      <div class="astat-icon" style="background:#FEF3C7">â³</div>
      <div><div class="astat-val" style="color:var(--orange)">{{ pending_subs }}</div><div class="astat-lbl">{{ t('pending_approvals') }}</div></div>
    </div>
    <div class="admin-stat-card">
      <div class="astat-icon" style="background:#FEE2E2">ğŸ’¸</div>
      <div><div class="astat-val" style="color:var(--red)">{{ pending_wds }}</div><div class="astat-lbl">{{ t('pending_withdrawals') }}</div></div>
    </div>
  </div>

  <!-- MONEY TOTAL -->
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:0 16px 14px">
    <div class="card" style="text-align:center">
      <div style="font-size:10px;color:var(--muted);font-weight:700;margin-bottom:4px">TOTAL â‚¦</div>
      <div style="font-size:18px;font-weight:800;color:var(--primary)">â‚¦{{ "%.2f"|format(total_naira) }}</div>
    </div>
    <div class="card" style="text-align:center">
      <div style="font-size:10px;color:var(--muted);font-weight:700;margin-bottom:4px">TOTAL $</div>
      <div style="font-size:18px;font-weight:800;color:var(--green)">${{ "%.4f"|format(total_dollar) }}</div>
    </div>
  </div>

  <!-- ADMIN NAV -->
  <div class="admin-nav">
    <a href="/admin/tasks" class="admin-nav-btn">
      <div class="anav-icon">ğŸ“‹</div><div class="anav-label">{{ t('manage_tasks') }}</div>
    </a>
    <a href="/admin/submissions" class="admin-nav-btn">
      {% if pending_subs %}<div class="anav-badge">{{ pending_subs }}</div>{% endif %}
      <div class="anav-icon">âœ…</div><div class="anav-label">{{ t('approve_tasks') }}</div>
    </a>
    <a href="/admin/withdrawals" class="admin-nav-btn">
      {% if pending_wds %}<div class="anav-badge">{{ pending_wds }}</div>{% endif %}
      <div class="anav-icon">ğŸ’¸</div><div class="anav-label">{{ t('manage_withdrawals') }}</div>
    </a>
    <a href="/admin/users" class="admin-nav-btn">
      <div class="anav-icon">ğŸ‘¥</div><div class="anav-label">{{ t('manage_users') }}</div>
    </a>
    <a href="/admin/broadcast" class="admin-nav-btn">
      <div class="anav-icon">ğŸ“¢</div><div class="anav-label">{{ t('broadcast') }}</div>
    </a>
    <a href="/admin/transfers" class="admin-nav-btn">
      <div class="anav-icon">ğŸ”„</div><div class="anav-label">{{ t('transfers_log') }}</div>
    </a>
    <a href="/admin/settings" class="admin-nav-btn">
      <div class="anav-icon">âš™ï¸</div><div class="anav-label">{{ t('settings') }}</div>
    </a>
    <a href="/admin/logs" class="admin-nav-btn">
      <div class="anav-icon">ğŸ“Š</div><div class="anav-label">{{ t('logs') }}</div>
    </a>
    <a href="/dashboard" class="admin-nav-btn">
      <div class="anav-icon">ğŸ‘¤</div><div class="anav-label">User View</div>
    </a>
  </div>

  <!-- RECENT USERS -->
  <div style="padding:0 16px">
    <div class="section-header"><div class="section-title">ğŸ‘¤ Recent Users</div><a href="/admin/users" class="section-link">{{ t('manage_users') }} â†’</a></div>
    <div class="card" style="padding:0">
      {% for uid, u in recent_users %}
      <a href="/admin/user/{{ uid }}" class="list-item">
        <div style="width:44px;height:44px;border-radius:14px;background:{% if u.banned %}#FEE2E2{% else %}linear-gradient(135deg,var(--primary),var(--accent)){% endif %};display:flex;align-items:center;justify-content:center;font-size:20px;color:white">
          {% if u.banned %}ğŸš«{% else %}ğŸ‘¤{% endif %}
        </div>
        <div class="list-info">
          <div class="list-name">{{ u.name }}</div>
          <div class="list-sub">{{ u.email }}</div>
        </div>
        <div class="list-right">
          <div class="list-meta">{{ u.created[:10] }}</div>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</div>

  <div id="toast-container" class="toast-container"></div>
  <script src="/static/js/app.js"></script>
</body>
</html>
